(()=>{"use strict";var e={365:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(601),a=r.n(n),o=r(314),i=r.n(o)()(a());i.push([e.id,"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-family: 'Orbitron', sans-serif;\n  letter-spacing: 2px;\n}\n:root {\n  --bg-main: #0d1b2a;\n  --color-water: #00a8e8;\n  --color-accent: #39ff14;\n  --color-hit: #ff4500;\n  --color-miss: #4d648d;\n  --color-ship: #a1887f;\n  --text-main: #eaeaea;\n}\nhtml,\nbody {\n  height: 100%;\n  width: 100%;\n  background-color: var(--bg-main);\n  /* font-family: 'Orbitron', sans-serif; */\n}\nheader {\n  width: 100%;\n  height: 60px;\n  background-color: #333;\n  color: var(--text-main);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n/* Modal styles */\n.modal {\n  display: none;\n  position: fixed;\n  z-index: 1;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgb(0, 0, 0);\n  background-color: rgba(0, 0, 0, 0.4);\n  padding-top: 60px;\n}\n\n.modal-content {\n  background-color: white;\n  margin: 5% auto;\n  padding: 20px;\n  border: 1px solid #888;\n  width: 80%;\n  max-width: 400px;\n  text-align: center;\n}\n\ninput {\n  padding: 10px;\n  width: 80%;\n  margin-top: 10px;\n}\n\n#submit-name {\n  padding: 10px;\n  width: 80%;\n  margin-top: 10px;\n  background-color: #4caf50;\n  color: white;\n  border: none;\n  cursor: pointer;\n}\n\n#submit-name:hover {\n  background-color: #45a049;\n}\n\n.content {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  width: 100%;\n  height: calc(100vh - 60px);\n  gap: 1rem;\n}\n.drag-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  height: 725px;\n}\n.grid-wrapper {\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n}\n.board-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 600px;\n  gap: 1rem;\n}\n.player-board-div,\n.computer-board-div {\n  min-height: 600px;\n}\n.utility-button-div {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.board {\n  display: grid;\n  grid-template-columns: repeat(10, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  background-image: linear-gradient(to bottom, var(--color-water), #081ee7);\n  background-repeat: no-repeat;\n  border: 3px solid black;\n}\n.grid-cell {\n  width: 50px;\n  height: 50px;\n  background-color: transparent;\n  border: 1px solid #0519ce3b;\n  /* border-color: #0519ce3b; */\n}\n.grid-cell {\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  transition: background-color 0.3s ease;\n}\n\n.grid-cell:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n  transform: scale(1.05);\n  cursor: pointer;\n}\n\n.grid-cell.ship {\n  background: var(--color-ship);\n}\n.grid-cell.miss {\n  background: var(--color-miss);\n}\n.grid-cell.hit {\n  background: var(--color-hit);\n}\n.drag-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-template-rows: repeat(10, 1fr);\n  background-image: linear-gradient(to bottom, var(--color-water), #081ee7);\n  background-repeat: no-repeat;\n  border: 3px solid black;\n}\n\n.drag-cells {\n  width: 50px;\n  height: 50px;\n  background-color: transparent;\n  border: 1px solid #0519ce3b;\n}\n.draggable-ship {\n  background-color: var(--color-ship);\n}\n.grid-cell.highlight {\n  border: 2px dashed rgba(0, 0, 0, 0.5);\n}\n.start-game-button {\n  flex-shrink: 0;\n  background: transparent;\n  border: none;\n  font-size: 0;\n  color: transparent;\n  cursor: pointer;\n  width: 25px;\n  height: 50px;\n  border-style: solid;\n  border-color: var(--color-accent);\n  border-width: 0 10px 10px 0;\n  transform: rotate(45deg) scale(1.5);\n  transition: border-color 0.2s ease-in-out;\n}\n.start-game-button:hover {\n  border-color: #28a745; /* A slightly darker green on hover */\n}\n.ships-remaining {\n  color: var(--text-main);\n}\n.utility-button {\n  background: #2b2d42;\n  color: var(--text-main);\n  border: none;\n  padding: 10px;\n  margin: 5px;\n  border-radius: 8px;\n  font-weight: bold;\n  box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.9);\n  transition: background 0.3s ease;\n}\n\n.utility-button:hover {\n  background: #8d99ae;\n}\n.wrapped-button {\n  font-size: larger;\n  border-radius: 1rem;\n  height: 80px;\n  width: 200px;\n}\n.game-over-message {\n  color: var(--text-main);\n  position: fixed;\n  bottom: 50px; /* distance from bottom */\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 12px 24px;\n  font-size: 1.5rem;\n  border-radius: 8px;\n  z-index: 9999;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);\n  pointer-events: none;\n}\n",""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var s=0;s<this.length;s++){var d=this[s][0];null!=d&&(i[d]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);n&&i[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),r&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=r):c[2]=r),a&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=a):c[4]="".concat(a)),t.push(c))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var o={},i=[],s=0;s<e.length;s++){var d=e[s],l=n.base?d[0]+n.base:d[0],c=o[l]||0,p="".concat(l," ").concat(c);o[l]=c+1;var h=r(p),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var g=a(u,n);n.byIndex=s,t.splice(s,0,{identifier:p,updater:g,references:1})}i.push(p)}return i}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var o=n(e=e||[],a=a||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=r(o[i]);t[s].references--}for(var d=n(e,a),l=0;l<o.length;l++){var c=r(o[l]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}o=d}}},659:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nc=void 0;var n=r(72),a=r.n(n),o=r(825),i=r.n(o),s=r(659),d=r.n(s),l=r(56),c=r.n(l),p=r(540),h=r.n(p),u=r(113),g=r.n(u),m=r(365),b={};b.styleTagTransform=g(),b.setAttributes=c(),b.insert=d().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=h(),a()(m.A,b),m.A&&m.A.locals&&m.A.locals;class f{constructor(e,t=null,r=null,n=[]){this.length=e,this.hits=0,this.id=t,this.orientation=r,this.coordinates=n}hit(){this.hits+=1}isSunk(){return this.hits===this.length}}class y{constructor(){this.board=Array(10).fill(null).map((()=>Array(10).fill(null))),this.receivedShots=[],this.ships=[]}placeShip(e,t=null,r=null){if(!this.isValidPlacement(e))return!1;let n=new f(e.length,t,r,e);return e.forEach((([e,t])=>{this.board[e][t]=n})),this.ships.push(n),n}removeShip(e){if(!e||0===e.length)return!1;const[t,r]=e[0],n=this.board[t][r];return n instanceof f&&(this.ships=this.ships.filter((e=>e!==n)),e.forEach((([e,t])=>{this.board[e][t]===n&&(this.board[e][t]=null)})),!0)}isValidPlacement(e){return e.every((([e,t])=>e>=0&&e<10&&t>=0&&t<10&&null===this.board[e][t]))}receiveAttack([e,t]){const r=this.board[e][t]instanceof f;r&&this.board[e][t].hit(),this.receivedShots.push({coordinates:[e,t],hit:r})}allShipsSunk(){return this.ships.every((e=>e.isSunk()))}resetBoard(){this.board=Array(10).fill(null).map((()=>Array(10).fill(null))),this.receivedShots=[],this.ships=[]}}class v{constructor(e){this.name=e,this.gameboard=new y,this.opponent=null,this.shipLengths=[5,4,3,3,2]}setName(e){this.name=e}setOpponent(e){this.opponent=e}placeShip(e,t,r){return this.gameboard.placeShip(e,t,r)}placeShipsRandomly(){this.shipLengths.forEach(((e,t)=>{const r=Math.random()<.5,n=r?"horizontal":"vertical",a=this.generateRandomCoordinates(e,r);this.placeShip(a,`ship-${t}`,n)}))}attack([e,t]){this.opponent&&this.opponent.gameboard.receiveAttack([e,t])}hasShipsLeft(){return!this.gameboard.allShipsSunk()}areAllShipsPlaced(){return this.gameboard.ships.length===this.shipLengths.length}generateRandomCoordinates(e,t){let r,n,a;do{r=[],n=Math.floor(10*Math.random()),a=Math.floor(10*Math.random());for(let o=0;o<e;o++){let e=t?n+o:n,i=t?a:a+o;if(e>=10||i>=10){r=[];break}r.push([e,i])}}while(r.length!==e||!this.gameboard.isValidPlacement(r));return r}}class S extends v{constructor(){super("Computer"),this.lastHit=null,this.targetQueue=[]}attack(){let e,t,r=!1;for(Array.isArray(this.targetQueue)&&this.targetQueue.length>0&&([e,t]=this.targetQueue.shift(),r=!0);!r;)e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random()),this.opponent.gameboard.receivedShots.find((r=>r.coordinates[0]===e&&r.coordinates[1]===t))||(r=!0);return super.attack([e,t]),this.opponent.gameboard.receivedShots[this.opponent.gameboard.receivedShots.length-1].hit&&(this.lastHit=[e,t],this.queueAdjacentShots(e,t)),[e,t]}queueAdjacentShots(e,t){const r=[[e-1,t],[e+1,t],[e,t-1],[e,t+1]];for(const[e,t]of r)e>=0&&e<10&&t>=0&&t<10&&!this.opponent.gameboard.receivedShots.find((r=>r.coordinates[0]===e&&r.coordinates[1]===t))&&this.targetQueue.push([e,t]);for(;this.targetQueue.length>5;)this.targetQueue.shift()}}let x=null,A="vertical";const w={createDivs(){const e=document.createElement("div");e.classList.add("grid-wrapper");const t=document.createElement("div");t.classList.add("board-wrapper","player-board-div");const r=document.createElement("div");r.classList.add("board-wrapper","computer-board-div");const n=document.createElement("div");n.classList.add("utility-button-div");const a=document.createElement("div");a.classList.add("board"),a.id="player-1-grid";const o=document.createElement("div");o.classList.add("board"),o.id="player-2-grid";const i=document.createElement("div");i.classList.add("drag-wrapper");const s=document.querySelector(".content");return t.append(a),r.append(o),e.append(t,r),s.append(i,e,n),[a,o]},disableButtons(){"undefined"!=typeof document&&document.querySelector("#player-2-grid").querySelectorAll("button").forEach((e=>{e.disabled=!0}))},enableButtons(){"undefined"!=typeof document&&document.querySelector("#player-2-grid").querySelectorAll("button").forEach((e=>{e.disabled=!1}))},async createBoard(e,t,r){t.gameboard.board.forEach(((n,a)=>{n.forEach(((n,o)=>{const i=document.createElement("button");i.classList.add("grid-cell"),e.append(i),i.dataset.row=a,i.dataset.col=o,t===r.player1&&(i.addEventListener("dragover",w.handleDragOver),i.addEventListener("dragleave",w.handleDragLeave),i.addEventListener("drop",(e=>w.handleDrop(e,t)))),t===r.player2&&i.addEventListener("click",(async()=>{w.disableButtons();const e=parseInt(i.dataset.row),t=parseInt(i.dataset.col),n=r.currentPlayer.opponent.gameboard.receivedShots.find((r=>r.coordinates[0]===e&&r.coordinates[1]===t));if(n)return console.log(`Already shot at (${e}, ${t}) - it was a ${n.hit?"hit":"miss"}`),void w.enableButtons();await r.playTurn([e,t]),r.isGameOver()?this.showGameOverMessage(r.currentPlayer.name):w.enableButtons()}))}))}))},addHitOrMissClass(e){if("undefined"==typeof document)return;const[t,r]=e.coordinates,n=document.querySelector(`#player-2-grid [data-row="${t}"][data-col="${r}"]`);e&&e.hit?n.classList.add("hit"):n.classList.add("miss")},addShipDataAttributes(e){document.querySelectorAll("#player-1-grid .ship").forEach((e=>{delete e.dataset.shipId,delete e.dataset.orientation,e.classList.remove("ship"),e.removeAttribute("draggable")})),e.forEach((e=>{e.coordinates.forEach((([t,r])=>{const n=document.querySelector(`[data-row="${t}"][data-col="${r}"]`);n&&(n.dataset.shipId=e.id,n.dataset.orientation=e.orientation,n.classList.add("ship"))}))}))},addClass(e,t){if("undefined"==typeof document)return;let[r,n]=e;const a=document.querySelector(`[data-row="${r}"][data-col="${n}"]`),o=t.gameboard.receivedShots.find((e=>e.coordinates[0]===r&&e.coordinates[1]===n));o&&a.classList.add(o.hit?"hit":"miss")},removeStartGameButton(){document.querySelector(".start-game-button")&&document.querySelector(".start-game-button").remove()},removeShipsRemaining(){let e=document.querySelectorAll(".ships-remaining");e&&e.forEach((e=>{e.remove()}))},addUtilityButtons(e){const t=document.createElement("button");t.textContent="RESTART",t.classList.add("utility-button","wrapped-button"),t.addEventListener("click",(()=>{e.restartGame(e),this.removeStartGameButton(),this.removeShipsRemaining(),this.removeExistingMessage(),document.querySelectorAll("#player-1-grid .grid-cell").forEach((e=>{e.removeAttribute("data-ship-id"),e.removeAttribute("data-orientation"),e.removeAttribute("draggable"),e.style.removeProperty("opacity")})),r.disabled=!1,n.textContent="VERTICAL",n.disabled=!1}));const r=document.createElement("button");r.classList.add("randomize-button","utility-button","wrapped-button"),r.textContent="RANDOMIZE",r.addEventListener("click",(()=>{e.player1.gameboard.resetBoard(),this.removeStartGameButton(),e.player1.placeShipsRandomly(),this.addShipDataAttributes(e.player1.gameboard.ships),document.querySelectorAll(".draggable-ship").forEach((e=>{e.classList.remove("draggable-ship"),e.removeAttribute("draggable")})),this.addDragToPlayerBoardShips(),this.addStartGameButton()}));const n=document.createElement("button");n.textContent="VERTICAL",n.classList.add("orientation-button","utility-button"),n.addEventListener("click",(()=>{const e="VERTICAL"===n.textContent?"horizontal":"vertical";n.textContent=e.toUpperCase(),[...document.querySelectorAll(".drag-grid .draggable-ship"),...document.querySelectorAll(".grid-cell.ship")].forEach((t=>{t.dataset.orientation=e})),A=e,console.log(`All ships set to ${e}`)}));const a=document.querySelector(".utility-button-div"),o=document.querySelector(".drag-wrapper");a.append(r,t),o.append(n)},addStartGameButton(e){const t=document.createElement("button");t.classList.add("start-game-button");const r=document.querySelector(".grid-wrapper"),n=r.children[1];e&&!e?.areAllShipsPlaced()||r.insertBefore(t,n),t.addEventListener("click",(()=>{this.enableButtons(),document.querySelectorAll("#player-1-grid .grid-cell").forEach((e=>{e.removeAttribute("draggable")})),document.querySelector(".randomize-button").disabled=!0,document.querySelector(".orientation-button").disabled=!0,this.addShipsRemainingDisplay(),t.remove()}))},addShipsRemainingDisplay(){if(document.querySelector(".ships-remaining"))return;const e=document.createElement("div");e.classList.add("ships-player1","ships-remaining"),e.textContent="Player 1 Ships Remaining: 5";const t=document.createElement("div");t.classList.add("ships-player2","ships-remaining"),t.textContent="Player 2 Ships Remaining: 5";const r=document.querySelector(".player-board-div"),n=document.querySelector(".computer-board-div");r.append(e),n.append(t)},updateShipsRemaining(e){const t=e.player1.gameboard.ships.filter((e=>!e.isSunk())).length,r=e.player2.gameboard.ships.filter((e=>!e.isSunk())).length,n=document.querySelector(".ships-player1"),a=document.querySelector(".ships-player2");n&&(n.textContent=`Player 1 Ships Remaining: ${t}`),a&&(a.textContent=`Computer Ships Remaining: ${r}`)},createDragGrid(){document.querySelector(".drag-grid")&&document.querySelector(".drag-grid").remove();const e=document.querySelector(".content"),t=document.querySelector(".drag-wrapper"),r=document.createElement("div");r.classList.add("drag-grid");const n=[{length:5,positions:[[0,0],[1,0],[2,0],[3,0],[4,0]]},{length:4,positions:[[6,0],[7,0],[8,0],[9,0]]},{length:3,positions:[[0,2],[1,2],[2,2]]},{length:3,positions:[[4,2],[5,2],[6,2]]},{length:2,positions:[[8,2],[9,2]]}];for(let e=0;e<10;e++)for(let t=0;t<3;t++){const a=document.createElement("button");a.classList.add("drag-cells");let o=!1,i=null;n.forEach(((r,n)=>{r.positions.forEach((([r,a])=>{e===r&&t===a&&(o=!0,i=`ship-${n}`)}))})),o&&(a.classList.add("draggable-ship"),a.dataset.shipId=i,a.dataset.orientation="vertical",a.setAttribute("draggable","true"),a.addEventListener("dragstart",w.handleDragStart),a.addEventListener("dragend",w.handleDragEnd)),r.append(a)}t.append(r),e.prepend(t)},handleDragStart(e){const t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/58HAokBAtgDTF8AAAAASUVORK5CYII=",e.dataTransfer.setDragImage(t,0,0);const r=e.target.dataset.shipId;document.querySelectorAll(`button[data-ship-id="${r}"]`).forEach((e=>{e.style.opacity="0.5"})),x=r;const n=e.target.dataset.orientation;A=n;const a={shipId:r,orientation:n};e.dataTransfer.setData("text/plain",JSON.stringify(a))},handleDragEnd(e){const t=e.target.dataset.shipId;document.querySelectorAll(`button[data-ship-id="${t}"]`).forEach((e=>{e.style.opacity="1"}))},handleDragOver(e){e.preventDefault();const t=e.target,r=t.getAttribute("data-row"),n=t.getAttribute("data-col"),a=e.dataTransfer.getData("text/plain");let o,i;try{const e=JSON.parse(a);o=e.shipId,i=e.orientation}catch{o=x,i=A}"ship-0"===o&&w.highlightCells(5,r,n,i),"ship-1"===o&&w.highlightCells(4,r,n,i),"ship-2"!==o&&"ship-3"!==o||w.highlightCells(3,r,n,i),"ship-4"===o&&w.highlightCells(2,r,n,i)},highlightCells(e,t,r,n){for(let a=0;a<e;a++){const e="vertical"===n?parseInt(t)-a:parseInt(t),o="horizontal"===n?parseInt(r)+a:parseInt(r),i=document.querySelector(`.grid-cell[data-row="${e}"][data-col="${o}"]`);i&&i.classList.add("highlight")}},handleDragLeave(){document.querySelectorAll(".grid-cell.highlight").forEach((e=>{e.classList.remove("highlight")}))},handleDrop(e,t){e.preventDefault();let r=[],n=!1;const a=e.dataTransfer.getData("text/plain");let o,i;try{const e=JSON.parse(a);o=e.shipId,i=e.orientation}catch{o=x,i=A}if(!a)return;const s={"ship-0":5,"ship-1":4,"ship-2":3,"ship-3":3,"ship-4":2}[o];if(!s)return;const d=e.target,l=parseInt(d.dataset.row),c=parseInt(d.dataset.col);if("vertical"===i&&l-(s-1)<0)return console.log("Ship does not fit vertically from this drop point."),void w.handleDragLeave();if("horizontal"===i&&c+(s-1)>9)return console.log("Ship does not fit horizontally from this drop point."),void w.handleDragLeave();let p=!0;for(let e=0;e<s;e++){let t="vertical"===i?l-e:l,r="horizontal"===i?c+e:c;const n=document.querySelector(`.grid-cell[data-row="${t}"][data-col="${r}"]`);if(!n||n.classList.contains("ship")){p=!1;break}}if(!p)return void w.handleDragLeave();const h=document.querySelectorAll(`.grid-cell.ship[data-ship-id="${o}"]`);let u=[];h.forEach((e=>{e.classList.remove("ship"),e.removeAttribute("data-ship-id"),e.removeAttribute("data-orientation"),e.removeAttribute("draggable"),e.style.removeProperty("opacity"),n=!0,u.push([parseInt(e.dataset.row),parseInt(e.dataset.col)])})),t.gameboard.removeShip(u);for(let e=0;e<s;e++){let t="vertical"===i?l-e:l,n="horizontal"===i?c+e:c;const a=document.querySelector(`.grid-cell[data-row="${t}"][data-col="${n}"]`);a&&(a.classList.add("ship"),a.dataset.shipId=o,a.dataset.orientation=i,r.push([t,n]))}console.log(`Ship ${o} placed starting at (${l}, ${c}) ${i} with length ${s}.`);const g=document.querySelectorAll(`.draggable-ship[data-ship-id="${o}"]`);g&&g.forEach((e=>{e.className="drag-cells";for(let t=e.attributes.length-1;t>=0;t--){const r=e.attributes[t];"class"!==r.name&&e.removeAttribute(r.name)}})),t.gameboard.placeShip(r,o,i),w.handleDragLeave(e),n||this.addStartGameButton(t),x=null,this.addDragToPlayerBoardShips()},addDragToPlayerBoardShips(){document.querySelectorAll(".ship").forEach((e=>{e.setAttribute("draggable","true"),e.addEventListener("dragstart",w.handleDragStart),e.addEventListener("dragend",w.handleDragEnd)}))},showGameOverMessage(e){this.removeExistingMessage();const t=document.createElement("div");t.classList.add("game-over-message"),t.textContent=`${e} has won the game!`,document.body.appendChild(t)},removeExistingMessage(){const e=document.querySelector(".game-over-message");e&&e.remove()}},E=w,L=e=>new Promise((t=>setTimeout(t,e))),k=new class{constructor(){this.player1=new v("Player 1"),this.player2=new S("Computer"),this.currentPlayer=this.player1}switchTurn(){this.currentPlayer===this.player1?this.currentPlayer=this.player2:this.currentPlayer=this.player1}async playTurn(e){this.currentPlayer.attack(e),E.updateShipsRemaining(this);const[t,r]=e,n=this.currentPlayer.opponent.gameboard.receivedShots.find((e=>e.coordinates[0]===t&&e.coordinates[1]===r));if(this.isGameOver())return E.addHitOrMissClass(n),void E.disableButtons();if(E.addHitOrMissClass(n),!(n&&n.hit||(E.addHitOrMissClass(n),this.switchTurn(),"Computer"!==this.currentPlayer.name))){const e=500;let t;await L(e);let r=!1;do{if(t=this.currentPlayer.attack(),E.updateShipsRemaining(this),this.isGameOver())return E.addClass(t,this.player1),void E.disableButtons();E.addClass(t,this.player1);const[e,n]=t,a=this.currentPlayer.opponent.gameboard.receivedShots.find((t=>t.coordinates[0]===e&&t.coordinates[1]===n));if(r=a&&a.hit,r){const e=300;await L(e)}}while(r);this.switchTurn()}}isGameOver(){return!this.player1.hasShipsLeft()||!this.player2.hasShipsLeft()}startGame(e,t){e.player1.name=t,e.player1.setOpponent(e.player2),e.player2.setOpponent(e.player1),e.player2.placeShipsRandomly();const r=E.createDivs();E.createBoard(r[0],e.player1,e),E.createBoard(r[1],e.player2,e),E.addUtilityButtons(e)}restartGame(e){document.querySelectorAll(".grid-cell").forEach((e=>{Array.from(e.classList).forEach((t=>{"grid-cell"!==t&&e.classList.remove(t),E.enableButtons()}))})),e.player1.gameboard.resetBoard(),e.player2.gameboard.resetBoard(),e.player2.placeShipsRandomly(),E.createDragGrid(),E.disableButtons()}};k.startGame(k,"Player 1"),E.createDragGrid(),E.disableButtons()})();